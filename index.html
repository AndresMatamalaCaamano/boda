<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boda de Sofía & Mateo - Confirmación</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Montserrat:wght@200;300;400;500&display=swap" rel="stylesheet">
    
    <!-- Iconos -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: 'Montserrat', sans-serif; }
        h1, h2, h3, .font-serif { font-family: 'Cormorant Garamond', serif; }
        
        /* Efecto de selección de menú */
        .menu-card {
            transition: all 0.3s ease;
            opacity: 0.8;
            border: 2px solid transparent;
            transform: scale(0.98);
        }
        .menu-card:hover {
            opacity: 1;
            transform: scale(1);
        }
        .menu-card.selected {
            opacity: 1;
            border-color: #b45309; /* amber-700 (Dorado oscuro) */
            transform: scale(1.02);
            background-color: #fffbeb; /* amber-50 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        /* Icono de check */
        .menu-check { display: none; }
        .menu-card.selected .menu-check { display: flex; }
        
        /* Animaciones */
        .fade-in-up { animation: fadeInUp 1s ease-out forwards; opacity: 0; transform: translateY(20px); }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        .loader {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #b45309;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Ajuste para que el calendario no se vea gigante en móviles */
        .calendar-day {
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="bg-[#f5f5f4] text-stone-800">

    <!-- HERO -->
    <header class="relative h-screen flex flex-col justify-center items-center text-center px-4 overflow-hidden">
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1519225421980-715cb0202128?q=80&w=1600&auto=format&fit=crop" class="w-full h-full object-cover opacity-90" alt="Boda">
            <div class="absolute inset-0 bg-gradient-to-b from-stone-900/40 via-transparent to-[#f5f5f4]"></div>
        </div>

        <div class="relative z-10 fade-in-up text-stone-900" style="animation-delay: 0.2s;">
            <div class="bg-white/90 backdrop-blur-md py-2 px-6 rounded-full inline-block mb-6 shadow-md border border-white">
                <p class="text-[10px] md:text-xs tracking-[0.3em] uppercase text-stone-600 font-bold">Save the Date</p>
            </div>
            <h1 class="text-6xl sm:text-7xl md:text-9xl font-serif mb-2 drop-shadow-lg text-white md:text-stone-900">S & M</h1>
            <p class="text-2xl md:text-3xl font-serif italic text-white md:text-rose-900 font-medium">Sofía y Mateo</p>
            
            <div class="mt-8 md:mt-12 flex items-center justify-center gap-4 md:gap-8 font-serif text-lg md:text-xl border-t border-b border-stone-800/30 py-4 max-w-[280px] md:max-w-xs mx-auto text-stone-800">
                <span>OCT</span>
                <span class="text-3xl md:text-4xl font-light">18</span>
                <span>2025</span>
            </div>
        </div>
    </header>

    <!-- CUENTA REGRESIVA & CARRUSEL -->
    <section class="max-w-6xl mx-auto px-4 py-16 md:py-24 grid md:grid-cols-2 gap-10 md:gap-16 items-center">
        <!-- Carrusel -->
        <div class="relative h-64 sm:h-96 md:h-[550px] rounded-2xl overflow-hidden shadow-2xl md:rotate-1 hover:rotate-0 transition-transform duration-500 border-[6px] md:border-[10px] border-white bg-white">
            <div id="slider" class="h-full w-full relative">
                <!-- Las imágenes se inyectan con JS -->
            </div>
             <button onclick="prevSlide()" class="absolute left-2 md:left-4 top-1/2 -translate-y-1/2 bg-white/60 hover:bg-white p-2 md:p-3 rounded-full transition text-stone-800 backdrop-blur-sm shadow-sm z-20"><i data-lucide="chevron-left"></i></button>
             <button onclick="nextSlide()" class="absolute right-2 md:right-4 top-1/2 -translate-y-1/2 bg-white/60 hover:bg-white p-2 md:p-3 rounded-full transition text-stone-800 backdrop-blur-sm shadow-sm z-20"><i data-lucide="chevron-right"></i></button>
        </div>

        <!-- Texto y Countdown -->
        <div class="text-center md:text-left">
            <h2 class="text-4xl md:text-6xl font-serif mb-6 text-stone-800 leading-tight">Celebra nuestro <span class="text-rose-900 italic">amor</span></h2>
            <p class="text-stone-600 mb-10 leading-relaxed font-light text-base md:text-lg md:border-l-4 md:border-rose-200 md:pl-6">Estamos contando los segundos para compartir este momento único con las personas que más queremos. Tu presencia es el mejor regalo.</p>
            
            <div id="countdown" class="grid grid-cols-4 gap-2 md:gap-4">
                <!-- JS llena esto -->
            </div>
        </div>
    </section>

    <!-- ITINERARIO -->
    <section class="bg-white py-16 md:py-24 shadow-sm border-y border-stone-200">
        <div class="max-w-5xl mx-auto px-4">
            <h2 class="text-center text-4xl md:text-5xl font-serif mb-12 md:mb-16 text-stone-800 tracking-wide">Itinerario</h2>
            
            <div class="grid md:grid-cols-3 gap-8 md:gap-12 text-center items-start">
                <!-- Ceremonia -->
                <div class="bg-stone-50 p-6 md:p-8 rounded-xl hover:shadow-lg transition-shadow duration-300">
                    <div class="w-14 h-14 md:w-16 md:h-16 bg-white rounded-full flex items-center justify-center text-rose-900 mx-auto mb-4 shadow-sm">
                        <i data-lucide="church" stroke-width="1.5" size="24"></i>
                    </div>
                    <h3 class="text-xl md:text-2xl font-serif text-stone-800 mb-2">Ceremonia</h3>
                    <p class="text-[10px] md:text-xs font-bold uppercase tracking-widest text-rose-700 mb-4">16:00 HRS</p>
                    <p class="text-stone-500 text-sm leading-relaxed mb-4">Catedral de Santa María<br>Av. Principal 123</p>
                    <a href="#" class="text-stone-900 text-[10px] md:text-xs font-bold border-b border-stone-900 hover:text-rose-700 hover:border-rose-700 transition-colors pb-0.5 uppercase">VER MAPA</a>
                </div>

                <!-- Calendario Visual -->
                <div class="border border-stone-200 p-6 md:p-8 rounded-xl bg-white shadow-md relative z-10 md:scale-105">
                    <h3 class="text-xl md:text-2xl font-serif mb-4 md:mb-6 text-rose-900 border-b border-stone-100 pb-2">Octubre</h3>
                    <div class="grid grid-cols-7 gap-1 md:gap-2 text-[8px] md:text-[10px] font-bold text-stone-400 mb-4 tracking-widest uppercase">
                        <span>L</span><span>M</span><span>M</span><span>J</span><span>V</span><span>S</span><span>D</span>
                    </div>
                    <div id="calendar-grid" class="grid grid-cols-7 gap-1 md:gap-2 font-serif text-stone-600 text-xs md:text-sm">
                        <!-- JS -->
                    </div>
                </div>

                <!-- Fiesta -->
                <div class="bg-stone-50 p-6 md:p-8 rounded-xl hover:shadow-lg transition-shadow duration-300">
                    <div class="w-14 h-14 md:w-16 md:h-16 bg-white rounded-full flex items-center justify-center text-rose-900 mx-auto mb-4 shadow-sm">
                        <i data-lucide="glass-water" stroke-width="1.5" size="24"></i>
                    </div>
                    <h3 class="text-xl md:text-2xl font-serif text-stone-800 mb-2">Recepción</h3>
                    <p class="text-[10px] md:text-xs font-bold uppercase tracking-widest text-rose-700 mb-4">19:00 HRS</p>
                    <p class="text-stone-500 text-sm leading-relaxed mb-4">Hacienda Los Olivos<br>Km 45 Vía al Valle</p>
                    <a href="#" class="text-stone-900 text-[10px] md:text-xs font-bold border-b border-stone-900 hover:text-rose-700 hover:border-rose-700 transition-colors pb-0.5 uppercase">VER MAPA</a>
                </div>
            </div>
        </div>
    </section>

    <!-- RSVP -->
    <section class="py-16 md:py-24 bg-[#e7e5e4]" id="rsvp">
        <div class="max-w-4xl mx-auto px-4">
            
            <div class="text-center mb-8 md:mb-12">
                <span class="bg-stone-800 text-white px-3 py-1 text-[9px] md:text-[10px] tracking-[0.2em] uppercase font-bold rounded mb-4 inline-block">Confirmación</span>
                <h2 class="text-4xl md:text-5xl font-serif text-stone-800">R.S.V.P</h2>
                <p class="mt-4 text-stone-600 font-light text-base md:text-lg max-w-lg mx-auto">Por favor ayúdanos a organizar mejor este día completando tus datos y preferencia de menú.</p>
            </div>

            <form id="rsvp-form" class="bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="bg-stone-800 p-4 md:p-6 text-center">
                    <p class="text-white/80 text-xs md:text-sm uppercase tracking-wider font-light">Formulario de Asistencia</p>
                </div>

                <div class="p-6 md:p-12">
                    <!-- Datos Personales -->
                    <div class="grid md:grid-cols-2 gap-4 md:gap-6 mb-10 md:mb-12">
                        <div class="bg-stone-50 p-4 rounded-lg border border-stone-200 focus-within:border-stone-400 focus-within:bg-white transition-all">
                            <label class="block text-[10px] font-bold uppercase tracking-wider text-stone-400 mb-1">Nombre</label>
                            <input type="text" name="nombre" required 
                                class="w-full bg-transparent border-none p-0 text-base md:text-lg font-serif text-stone-800 focus:ring-0 placeholder-stone-300" 
                                placeholder="Escribe aquí...">
                        </div>
                        <div class="bg-stone-50 p-4 rounded-lg border border-stone-200 focus-within:border-stone-400 focus-within:bg-white transition-all">
                            <label class="block text-[10px] font-bold uppercase tracking-wider text-stone-400 mb-1">Apellido</label>
                            <input type="text" name="apellido" required 
                                class="w-full bg-transparent border-none p-0 text-base md:text-lg font-serif text-stone-800 focus:ring-0 placeholder-stone-300" 
                                placeholder="Escribe aquí...">
                        </div>
                    </div>

                    <!-- Selección de Menú -->
                    <div class="mb-10">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="h-px bg-stone-200 flex-1"></div>
                            <span class="text-[10px] md:text-xs font-bold uppercase tracking-widest text-stone-400">Selecciona tu Menú</span>
                            <div class="h-px bg-stone-200 flex-1"></div>
                        </div>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6">
                            <!-- Opción 1 -->
                            <div class="menu-card cursor-pointer bg-white rounded-xl p-4 border border-stone-200 text-center group" onclick="selectMenu('Carne', this)">
                                <div class="w-full h-32 rounded-lg overflow-hidden mb-3 relative">
                                     <div class="absolute inset-0 bg-stone-900/10"></div>
                                     <div class="menu-check absolute inset-0 bg-stone-900/40 items-center justify-center text-white backdrop-blur-[2px]">
                                         <i data-lucide="check-circle-2" size="32"></i>
                                     </div>
                                     <img src="https://images.unsplash.com/photo-1546241072-48010ad2862c?auto=format&fit=crop&q=80&w=400" class="w-full h-full object-cover">
                                </div>
                                <h4 class="font-serif text-lg md:text-xl text-stone-800">Lomo Fino</h4>
                                <p class="text-[10px] text-stone-500 font-medium">Salsa de finas hierbas</p>
                            </div>

                            <!-- Opción 2 -->
                            <div class="menu-card cursor-pointer bg-white rounded-xl p-4 border border-stone-200 text-center group" onclick="selectMenu('Pollo', this)">
                                <div class="w-full h-32 rounded-lg overflow-hidden mb-3 relative">
                                     <div class="absolute inset-0 bg-stone-900/10"></div>
                                     <div class="menu-check absolute inset-0 bg-stone-900/40 items-center justify-center text-white backdrop-blur-[2px]">
                                         <i data-lucide="check-circle-2" size="32"></i>
                                     </div>
                                     <img src="https://images.unsplash.com/photo-1604908176997-125f25cc6f3d?auto=format&fit=crop&q=80&w=400" class="w-full h-full object-cover">
                                </div>
                                <h4 class="font-serif text-lg md:text-xl text-stone-800">Pollo</h4>
                                <p class="text-[10px] text-stone-500 font-medium">Salsa de champiñones</p>
                            </div>

                            <!-- Opción 3 -->
                            <div class="menu-card cursor-pointer bg-white rounded-xl p-4 border border-stone-200 text-center group" onclick="selectMenu('Vegetariano', this)">
                                <div class="w-full h-32 rounded-lg overflow-hidden mb-3 relative">
                                     <div class="absolute inset-0 bg-stone-900/10"></div>
                                     <div class="menu-check absolute inset-0 bg-stone-900/40 items-center justify-center text-white backdrop-blur-[2px]">
                                         <i data-lucide="check-circle-2" size="32"></i>
                                     </div>
                                     <img src="https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&q=80&w=400" class="w-full h-full object-cover">
                                </div>
                                <h4 class="font-serif text-lg md:text-xl text-stone-800">Risotto</h4>
                                <p class="text-[10px] text-stone-500 font-medium">Calabaza & Parmesano</p>
                            </div>
                        </div>
                        
                        <input type="hidden" id="menu-input" name="menu" required>
                        <p id="menu-error" class="hidden text-center text-amber-700 text-[10px] mt-4 bg-amber-50 py-2 rounded border border-amber-200 font-medium uppercase tracking-wide">
                            ⚠️ Selecciona una opción de menú
                        </p>
                    </div>

                    <!-- Botón -->
                    <div class="text-center">
                        <button type="submit" id="submit-btn" class="bg-amber-700 text-white px-10 md:px-16 py-4 rounded-lg font-bold tracking-[0.2em] hover:bg-amber-800 transition-all duration-300 hover:shadow-lg uppercase text-xs md:text-sm w-full md:w-auto">
                            Confirmar Asistencia
                        </button>
                        <p id="rsvp-status" class="mt-4 text-xs font-medium hidden"></p>
                    </div>
                </div>
            </form>

            <!-- Mensaje de éxito -->
            <div id="success-msg" class="hidden bg-white p-8 md:p-12 rounded-2xl shadow-2xl text-center border-t-8 border-green-600 mt-8">
                <div class="w-16 h-16 md:w-20 md:h-20 bg-green-50 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i data-lucide="check" size="40"></i>
                </div>
                <h3 class="text-2xl md:text-3xl font-serif text-stone-800 mb-2">¡Datos Recibidos!</h3>
                <p class="text-stone-600 text-sm md:text-base">Tu confirmación ha sido guardada exitosamente.</p>
                <div class="mt-8 pt-8 border-t border-stone-100">
                    <p class="text-stone-400 font-serif italic text-lg md:text-xl">"Gracias por acompañarnos"</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-[#292524] text-stone-400 py-12 text-center">
        <div class="mb-4 opacity-40">
             <i data-lucide="heart" size="20" class="mx-auto"></i>
        </div>
        <p class="font-serif text-2xl mb-2 text-stone-300 tracking-wider">Sofía & Mateo</p>
        <p class="text-[9px] tracking-[0.3em] uppercase opacity-50">Octubre 2025</p>
    </footer>

    <!-- JS -->
    <script>
        lucide.createIcons();

        function selectMenu(menuValue, element) {
            document.getElementById('menu-input').value = menuValue;
            document.querySelectorAll('.menu-card').forEach(card => card.classList.remove('selected'));
            element.classList.add('selected');
            document.getElementById('menu-error').classList.add('hidden');
        }

        const FECHA_BODA = new Date(2025, 9, 18, 16, 0, 0).getTime();

        function updateCountdown() {
            const now = new Date().getTime();
            const diff = FECHA_BODA - now;
            
            const timeData = [
                { val: Math.floor(diff / (1000 * 60 * 60 * 24)), label: 'Días' },
                { val: Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)), label: 'Horas' },
                { val: Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)), label: 'Min' },
                { val: Math.floor((diff % (1000 * 60)) / 1000), label: 'Seg' }
            ];

            const container = document.getElementById('countdown');
            container.innerHTML = diff > 0 ? timeData.map(t => `
                <div class="bg-stone-50 p-2 md:p-4 w-full rounded-lg border border-stone-100 flex flex-col items-center justify-center shadow-sm">
                    <span class="text-xl md:text-4xl font-serif text-stone-800 font-bold leading-none">${String(t.val).padStart(2,'0')}</span>
                    <span class="text-[7px] md:text-[9px] font-bold text-stone-400 tracking-widest uppercase mt-1 md:mt-2">${t.label}</span>
                </div>
            `).join('') : '<div class="w-full text-2xl font-serif text-rose-900 text-center">¡Es hoy!</div>';
        }
        setInterval(updateCountdown, 1000);
        updateCountdown();

        const images = [
            "https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&q=80&w=800",
            "https://images.unsplash.com/photo-1583939003579-730e3918a45a?auto=format&fit=crop&q=80&w=800",
            "https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?auto=format&fit=crop&q=80&w=800"
        ];
        let currentIdx = 0;
        const slider = document.getElementById('slider');

        function renderSlide() {
            slider.innerHTML = `
                <div class="w-full h-full bg-cover bg-center transition-all duration-1000 ease-in-out transform scale-105" 
                     style="background-image: url('${images[currentIdx]}');">
                     <div class="absolute inset-0 bg-stone-900/10"></div>
                </div>
            `;
        }
        function nextSlide() { currentIdx = (currentIdx + 1) % images.length; renderSlide(); }
        function prevSlide() { currentIdx = (currentIdx === 0) ? images.length - 1 : currentIdx - 1; renderSlide(); }
        
        renderSlide();
        setInterval(nextSlide, 5000);

        const calendarGrid = document.getElementById('calendar-grid');
        let calHTML = '<span></span><span></span>';
        for(let i=1; i<=31; i++) {
            let style = i === 18 ? 'bg-amber-700 text-white rounded-full shadow-md font-bold' : 'text-stone-400 hover:text-stone-800';
            calHTML += `<div class="calendar-day ${style}">${i}</div>`;
        }
        calendarGrid.innerHTML = calHTML;

        const rsvpForm = document.getElementById('rsvp-form');
        const submitBtn = document.getElementById('submit-btn');
        const statusMsg = document.getElementById('rsvp-status');
        const menuInput = document.getElementById('menu-input');
        const menuError = document.getElementById('menu-error');
        const successSection = document.getElementById('success-msg');

        // URL proporcionada por el usuario
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzkBX1GZASS5E9_sozTi547KgE2lqtJiu1FYjNxmCchTmBqWxsYsSENvEFMsWBALAeK/exec";

        rsvpForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!menuInput.value) {
                menuError.classList.remove('hidden');
                return;
            }
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<span class="loader"></span>';
            submitBtn.disabled = true;

            const formData = new FormData(rsvpForm);
            try {
                const response = await fetch(SCRIPT_URL, { method: 'POST', body: formData });
                if (response) {
                    rsvpForm.classList.add('hidden');
                    successSection.classList.remove('hidden');
                    successSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    rsvpForm.reset();
                }
            } catch (error) {
                statusMsg.textContent = "Error de conexión.";
                statusMsg.classList.remove('hidden');
            } finally {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
